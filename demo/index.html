<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, minimum-scale=1, initial-scale=1, user-scalable=yes">

    <title>share-menu demo</title>
    <meta name="description" content="share-menu demo description">

    <script src="https://cdn.jsdelivr.net/npm/@webcomponents/webcomponentsjs@2.8.0/webcomponents-loader.js"></script>

    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Google+Sans&family=Google+Sans+Mono&family=Material+Symbols+Outlined&display=swap">

    <style>
        html, body {
          font-family: var(--md-ref-typeface-plain);
          background: var(--md-sys-color-background);
          color: var(--md-sys-color-on-background);
          --md-ref-typeface-plain: 'Google Sans', sans-serif;
          --md-ref-typeface-brand: 'Google Sans', sans-serif;

          --md-sys-color-background:#f6fafe;
          --md-sys-color-on-background:#181c1f;
          --md-sys-color-surface:#f6fafe;
          --md-sys-color-surface-dim:#d7dade;
          --md-sys-color-surface-bright:#f6fafe;
          --md-sys-color-surface-container-lowest:#ffffff;
          --md-sys-color-surface-container-low:#f0f4f8;
          --md-sys-color-surface-container:#ebeef2;
          --md-sys-color-surface-container-high:#e5e8ec;
          --md-sys-color-surface-container-highest:#dfe3e7;
          --md-sys-color-on-surface:#181c1f;
          --md-sys-color-surface-variant:#dae4eb;
          --md-sys-color-on-surface-variant:#3f484e;
          --md-sys-color-inverse-surface:#2d3134;
          --md-sys-color-inverse-on-surface:#eef1f5;
          --md-sys-color-outline:#6f787f;
          --md-sys-color-outline-variant:#bec8cf;
          --md-sys-color-shadow:#000000;
          --md-sys-color-scrim:#000000;
          --md-sys-color-surface-tint:#006688;
          --md-sys-color-primary:#006688;
          --md-sys-color-on-primary:#ffffff;
          --md-sys-color-primary-container:#48addb;
          --md-sys-color-on-primary-container:#001925;
          --md-sys-color-inverse-primary:#77d1ff;
          --md-sys-color-secondary:#426275;
          --md-sys-color-on-secondary:#ffffff;
          --md-sys-color-secondary-container:#ccebff;
          --md-sys-color-on-secondary-container:#2d4e60;
          --md-sys-color-tertiary:#7c4a93;
          --md-sys-color-on-tertiary:#ffffff;
          --md-sys-color-tertiary-container:#c48ddc;
          --md-sys-color-on-tertiary-container:#28003c;
          --md-sys-color-error:#ba1a1a;
          --md-sys-color-on-error:#ffffff;
          --md-sys-color-error-container:#ffdad6;
          --md-sys-color-on-error-container:#410002;
        }

        @media screen and (prefers-color-scheme: dark) {
          html, body {
            --md-sys-color-background:#0f1417;
            --md-sys-color-on-background:#dfe3e7;
            --md-sys-color-surface:#0f1417;
            --md-sys-color-surface-dim:#0f1417;
            --md-sys-color-surface-bright:#353a3d;
            --md-sys-color-surface-container-lowest:#0a0f12;
            --md-sys-color-surface-container-low:#181c1f;
            --md-sys-color-surface-container:#1c2023;
            --md-sys-color-surface-container-high:#262b2e;
            --md-sys-color-surface-container-highest:#313538;
            --md-sys-color-on-surface:#dfe3e7;
            --md-sys-color-surface-variant:#3f484e;
            --md-sys-color-on-surface-variant:#bec8cf;
            --md-sys-color-inverse-surface:#dfe3e7;
            --md-sys-color-inverse-on-surface:#2d3134;
            --md-sys-color-outline:#889299;
            --md-sys-color-outline-variant:#3f484e;
            --md-sys-color-shadow:#000000;
            --md-sys-color-scrim:#000000;
            --md-sys-color-surface-tint:#77d1ff;
            --md-sys-color-primary:#77d1ff;
            --md-sys-color-on-primary:#003549;
            --md-sys-color-primary-container:#007da7;
            --md-sys-color-on-primary-container:#ffffff;
            --md-sys-color-inverse-primary:#006688;
            --md-sys-color-secondary:#a9cbe0;
            --md-sys-color-on-secondary:#103445;
            --md-sys-color-secondary-container:#224354;
            --md-sys-color-on-secondary-container:#b7d9ee;
            --md-sys-color-tertiary:#e9b3ff;
            --md-sys-color-on-tertiary:#491961;
            --md-sys-color-tertiary-container:#9460ab;
            --md-sys-color-on-tertiary-container:#ffffff;
            --md-sys-color-error:#ffb4ab;
            --md-sys-color-on-error:#690005;
            --md-sys-color-error-container:#93000a;
            --md-sys-color-on-error-container:#ffdad6;
          }
        }
    </style>

    <script type="importmap">
      {
        "imports": {
          "lit": "https://cdn.jsdelivr.net/npm/lit@3.1.2/index.js",
          "lit/": "https://cdn.jsdelivr.net/npm/lit@3.1.2/",
          "@material/web/": "https://cdn.jsdelivr.net/npm/@material/web/",
          "@lit/localize": "https://cdn.jsdelivr.net/npm/@lit/localize/lit-localize.js",
          "@lit/reactive-element": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@1/reactive-element.js",
          "@lit/reactive-element/": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@1/",
          "lit-element/lit-element.js": "https://cdn.jsdelivr.net/npm/lit-element@3/lit-element.js",
          "lit-html": "https://cdn.jsdelivr.net/npm/lit-html@3.1.2/lit-html.js",
          "lit-html/": "https://cdn.jsdelivr.net/npm/lit-html@3.1.2/",
          "tslib": "https://cdn.jsdelivr.net/npm/tslib@2.6.2/tslib.es6.mjs"
        }
      }
    </script>
    <script defer src="https://cdn.jsdelivr.net/npm/prismjs@1.29.0"></script>
    <script type="module">
      import '@material/web/textfield/outlined-text-field.js';
      import '@material/web/switch/switch.js';
      import '@material/web/button/filled-button.js';
      import '@material/web/icon/icon.js';
      import '../share-menu.js';
      import '../targets/presets/all.js';

      import { LitElement, css, html } from 'lit';

      const mql = window.matchMedia('(prefers-color-scheme: dark)');
      const getPrismStyles = async dark => {
        const res = await fetch(`https://cdn.jsdelivr.net/npm/prism-themes@1.9.0/themes/prism-coldark-${mql.matches ? 'dark' : 'cold'}.min.css`);
        return res.text();
      };

      getPrismStyles().then(initialPrismStyles => {
        class ShareMenuDemo extends LitElement {
          _prismStyles = '';

          static get properties() {
            return {
              title: { type: String },
              text: { type: String },
              url: { type: String },
              image: { type: String },
              hideBackdrop: { type: Boolean },
            };
          }

          static get styles() {
            return [
              css`
                share-menu {
                  --sm-backdrop-color: var(--md-sys-color-scrim);
                  --sm-background-color: var(--md-sys-color-surface-container-high);
                  --sm-clipboard-background-color: var(--md-sys-color-surface-container-highest);
                  --sm-title-color: var(--md-sys-color-on-surface);
                  --sm-ripple-color: var(--md-sys-color-on-surface);
                  --sm-labels-color: var(--md-sys-color-on-surface-variant);
                  --sm-hint-color: var(--md-sys-color-on-surface-variant);
                  --sm-handle-color: var(--md-sys-color-outline);
                  --sm-divider-color: var(--md-sys-color-outline-variant);
                  --sm-preview-color: var(--md-sys-color-on-surface-variant);
                }

                .container {
                  max-width: 600px;
                  margin: 16px auto;
                  padding: 16px;
                  border-radius: 12px;
                  background: var(--md-sys-color-surface-container);
                  box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.14), 0 1px 5px 0 rgba(0, 0, 0, 0.12), 0 3px 1px -2px rgba(0, 0, 0, 0.2);
                }

                .container > :not(:last-child) {
                  width: 100%;
                  margin: 12px 0;
                }

                .toggle-container {
                  display: flex;
                  align-items: center;
                  justify-content: space-between;
                }

                .toggle-container > label {
                  line-height: 2;
                  flex: 1;
                  cursor: pointer;
                }

                pre {
                  border-radius: 12px;
                  border: 1px solid var(--mdc-text-field-outlined-idle-border-color);
                }

                pre.language-html {
                  background: var(--md-sys-color-surface-container-high);
                  padding-top: 0;
                  padding-bottom: 0;
                }

                code.language-html {
                  background: var(--md-sys-color-surface-container-high);
                  font-family: 'Google Sans Mono', monospace;
                }
              `,
            ];
          }

          static demoSnippet = `
            <style>
              /**
               * Style the fallback share menu according to the theme
               * values coming from Material Web
               */
              share-menu {
                --sm-backdrop-color: var(--md-sys-color-scrim);
                --sm-background-color: var(--md-sys-color-surface-container-high);
                --sm-clipboard-background-color: var(--md-sys-color-surface-container-highest);
                --sm-title-color: var(--md-sys-color-on-surface);
                --sm-ripple-color: var(--md-sys-color-on-surface);
                --sm-labels-color: var(--md-sys-color-on-surface-variant);
                --sm-hint-color: var(--md-sys-color-on-surface-variant);
                --sm-handle-color: var(--md-sys-color-outline);
                --sm-divider-color: var(--md-sys-color-outline-variant);
                --sm-preview-color: var(--md-sys-color-on-surface-variant);
              }
            </style>

            <div class="container">
              <h3>&lt;share-menu&gt; demo</h3>
              <md-outlined-text-field id="title" label="Title" @input="\${e => this.title = e.target.value}"></md-outlined-text-field>
              <md-outlined-text-field type="textarea" id="text" label="Text" @input="\${e => this.text = e.target.value}"></md-outlined-text-field>
              <md-outlined-text-field id="url" type="url" label="URL" @input="\${e => this.url = e.target.value}"></md-outlined-text-field>
              <md-outlined-text-field id="image" type="url" label="Image" @input="\${e => this.image = e.target.value}"></md-outlined-text-field>
              <div class="toggle-container">
                <label for="backdrop">Hide backdrop</label>
                <md-switch id="backdrop" @click="\${e => this.hideBackdrop = e.target.selected}"></md-switch>
              </div>
              <div class="actions-container">
                <md-filled-button ?disabled="\${!this.title && !this.text && !this.url && !this.image}" @click="\${() => this.shareMenu.share()}">
                  Share
                  <md-icon slot="icon">share</md-icon>
                </md-filled-button>
              </div>
            </div>

            <share-menu title="\${this.title}" text="\${this.text}" url="\${this.url}" image="\${this.image}" ?no-backdrop="\${this.hideBackdrop}">
              <share-target-preset-all></share-target-preset-all>
            </share-menu>

            <script type="importmap">
              {
                "imports": {
                  "lit": "https://cdn.jsdelivr.net/npm/lit@3.1.2/index.js",
                  "lit/": "https://cdn.jsdelivr.net/npm/lit@3.1.2/",
                  "@material/web/": "https://cdn.jsdelivr.net/npm/@material/web/",
                  "@lit/localize": "https://cdn.jsdelivr.net/npm/@lit/localize/lit-localize.js",
                  "@lit/reactive-element": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@1/reactive-element.js",
                  "@lit/reactive-element/": "https://cdn.jsdelivr.net/npm/@lit/reactive-element@1/",
                  "lit-element/lit-element.js": "https://cdn.jsdelivr.net/npm/lit-element@3/lit-element.js",
                  "lit-html": "https://cdn.jsdelivr.net/npm/lit-html@3.1.2/lit-html.js",
                  "lit-html/": "https://cdn.jsdelivr.net/npm/lit-html@3.1.2/",
                  "tslib": "https://cdn.jsdelivr.net/npm/tslib@2.6.2/tslib.es6.mjs",
                  "share-menu": "https://cdn.jsdelivr.net/npm/share-menu@5.1.0/share-menu.js",
                  "share-menu/" : "https://cdn.jsdelivr.net/npm/share-menu@5.1.0/",
                }
              }
            <\/script>
            <script type="module">
              import '@material/web/textfield/outlined-text-field.js';
              import '@material/web/switch/switch.js';
              import '@material/web/button/filled-button.js';
              import '@material/web/icon/icon.js';
              import 'share-menu';
              import 'share-menu/targets/presets/all.js';
            <\/script>
          `.replace(/ {12}/g, '');

          constructor() {
            super();
            this.title = '';
            this.text = '';
            this.url = '';
            this.image = '';
            this.hideBackdrop = false;
            this._prismStyles = initialPrismStyles;
            mql.addEventListener('change', async () => {
              const prismStyles = await getPrismStyles();
              this._prismStyles = prismStyles;
              this.requestUpdate();
            });
          }

          firstUpdated() {
            this.shareMenu = this.shadowRoot.querySelector('share-menu');
            Prism.highlightAllUnder(this.shadowRoot.querySelector('pre'));
          }

          render() {
            return html`
              <style>${this._prismStyles}</style>
              <div class="container">
                <h3>&lt;share-menu&gt; demo</h3>
                <md-outlined-text-field id="title" label="Title" @input="${e => this.title = e.target.value}"></md-outlined-text-field>
                <md-outlined-text-field type="textarea" id="text" label="Text" @input="${e => this.text = e.target.value}"></md-outlined-text-field>
                <md-outlined-text-field id="url" type="url" label="URL" @input="${e => this.url = e.target.value}"></md-outlined-text-field>
                <md-outlined-text-field id="image" type="url" label="Image" @input="${e => this.image = e.target.value}"></md-outlined-text-field>
                <div class="toggle-container">
                  <label for="backdrop">Hide backdrop</label>
                  <md-switch id="backdrop" @click="${e => this.hideBackdrop = e.target.selected}"></md-switch>
                </div>
                <div class="actions-container">
                  <md-filled-button ?disabled="${!this.title && !this.text && !this.url && !this.image}" @click="${() => this.shareMenu.share()}">
                    Share
                    <md-icon slot="icon">share</md-icon>
                  </md-filled-button>
                </div>
                <pre>
                  <code class="language-html">${ShareMenuDemo.demoSnippet}</code>
                </pre>
              </div>

              <share-menu title="${this.title}" text="${this.text}" url="${this.url}" image="${this.image}" ?no-backdrop="${this.hideBackdrop}">
                <share-target-preset-all></share-target-preset-all>
              </share-menu>
            `;
          }
        }

        customElements.define('share-menu-demo', ShareMenuDemo);
      });
    </script>
  </head>
  <body>
    <share-menu-demo></share-menu-demo>
  </body>
</html>
